# Template file for 'openjdk17-bin'
pkgname=openjdk17-bin
version=17.0.1
revision=1
archs="aarch64 x86_64"
wrksrc="jdk-${version}"
short_desc="General-Availability Release for Java SE 17"
maintainer="Hill Ma <maahiuzeon@gmail.com>"
license="GPL-2.0-or-later"
homepage="https://jdk.java.net/17/"

if [ "$XBPS_TARGET_MACHINE" = "aarch64" ]; then
	_arch="aarch64"
	checksum=86653d48787e5a1c029df10da7808194fe8bd931ddd72ff3d42850bf1afb317e
elif [ "$XBPS_TARGET_MACHINE" = "x86_64" ]; then
	_arch="x64"
	checksum=1c0a73cbb863aad579b967316bf17673b8f98a9bb938602a140ba2e5c38f880a
fi

distfiles="https://download.java.net/java/GA/jdk${version}/2a2082e5a09d4267845be086888add4f/12/GPL/openjdk-${version}_linux-${_arch}_bin.tar.gz"

nopie=true

alternatives="
 java:/usr/bin/java:/usr/lib/jvm/openjdk17-bin/bin/java
 java:/usr/bin/javaws:/usr/lib/jvm/openjdk17-bin/bin/javaws
 java:/usr/bin/jcontrol:/usr/lib/jvm/openjdk17-bin/bin/jcontrol
 java:/usr/bin/jjs:/usr/lib/jvm/openjdk17-bin/bin/jjs
 java:/usr/bin/keytool:/usr/lib/jvm/openjdk17-bin/bin/keytool
 java:/usr/bin/orbd:/usr/lib/jvm/openjdk17-bin/bin/orbd
 java:/usr/bin/pack200:/usr/lib/jvm/openjdk17-bin/bin/pack200
 java:/usr/bin/policytool:/usr/lib/jvm/openjdk17-bin/bin/policytool
 java:/usr/bin/rmid:/usr/lib/jvm/openjdk17-bin/bin/rmid
 java:/usr/bin/rmiregistry:/usr/lib/jvm/openjdk17-bin/bin/rmiregistry
 java:/usr/bin/servertool:/usr/lib/jvm/openjdk17-bin/bin/servertool
 java:/usr/bin/tnameserv:/usr/lib/jvm/openjdk17-bin/bin/tnameserv
 java:/usr/bin/unpack200:/usr/lib/jvm/openjdk17-bin/bin/unpack200

 jdk:/usr/bin/ControlPanel:/usr/lib/jvm/openjdk17-bin/bin/ControlPanel
 jdk:/usr/bin/appletviewer:/usr/lib/jvm/openjdk17-bin/bin/appletviewer
 jdk:/usr/bin/extcheck:/usr/lib/jvm/openjdk17-bin/bin/extcheck
 jdk:/usr/bin/idlj:/usr/lib/jvm/openjdk17-bin/bin/idlj
 jdk:/usr/bin/jar:/usr/lib/jvm/openjdk17-bin/bin/jar
 jdk:/usr/bin/jarsigner:/usr/lib/jvm/openjdk17-bin/bin/jarsigner
 jdk:/usr/bin/java-rmi.cgi:/usr/lib/jvm/openjdk17-bin/bin/java-rmi.cgi
 jdk:/usr/bin/javac:/usr/lib/jvm/openjdk17-bin/bin/javac
 jdk:/usr/bin/javadoc:/usr/lib/jvm/openjdk17-bin/bin/javadoc
 jdk:/usr/bin/javafxpackager:/usr/lib/jvm/openjdk17-bin/bin/javafxpackager
 jdk:/usr/bin/javah:/usr/lib/jvm/openjdk17-bin/bin/javah
 jdk:/usr/bin/javap:/usr/lib/jvm/openjdk17-bin/bin/javap
 jdk:/usr/bin/javapackager:/usr/lib/jvm/openjdk17-bin/bin/javapackager
 jdk:/usr/bin/jcmd:/usr/lib/jvm/openjdk17-bin/bin/jcmd
 jdk:/usr/bin/jconsole:/usr/lib/jvm/openjdk17-bin/bin/jconsole
 jdk:/usr/bin/jdb:/usr/lib/jvm/openjdk17-bin/bin/jdb
 jdk:/usr/bin/jdeps:/usr/lib/jvm/openjdk17-bin/bin/jdeps
 jdk:/usr/bin/jhat:/usr/lib/jvm/openjdk17-bin/bin/jhat
 jdk:/usr/bin/jinfo:/usr/lib/jvm/openjdk17-bin/bin/jinfo
 jdk:/usr/bin/jmap:/usr/lib/jvm/openjdk17-bin/bin/jmap
 jdk:/usr/bin/jmc:/usr/lib/jvm/openjdk17-bin/bin/jmc
 jdk:/usr/bin/jmc.ini:/usr/lib/jvm/openjdk17-bin/bin/jmc.ini
 jdk:/usr/bin/jps:/usr/lib/jvm/openjdk17-bin/bin/jps
 jdk:/usr/bin/jrunscript:/usr/lib/jvm/openjdk17-bin/bin/jrunscript
 jdk:/usr/bin/jsadebugd:/usr/lib/jvm/openjdk17-bin/bin/jsadebugd
 jdk:/usr/bin/jstack:/usr/lib/jvm/openjdk17-bin/bin/jstack
 jdk:/usr/bin/jstat:/usr/lib/jvm/openjdk17-bin/bin/jstat
 jdk:/usr/bin/jstatd:/usr/lib/jvm/openjdk17-bin/bin/jstatd
 jdk:/usr/bin/jvisualvm:/usr/lib/jvm/openjdk17-bin/bin/jvisualvm
 jdk:/usr/bin/native2ascii:/usr/lib/jvm/openjdk17-bin/bin/native2ascii
 jdk:/usr/bin/rmic:/usr/lib/jvm/openjdk17-bin/bin/rmic
 jdk:/usr/bin/schemagen:/usr/lib/jvm/openjdk17-bin/bin/schemagen
 jdk:/usr/bin/serialver:/usr/lib/jvm/openjdk17-bin/bin/serialver
 jdk:/usr/bin/wsgen:/usr/lib/jvm/openjdk17-bin/bin/wsgen
 jdk:/usr/bin/wsimport:/usr/lib/jvm/openjdk17-bin/bin/wsimport
 jdk:/usr/bin/xjc:/usr/lib/jvm/openjdk17-bin/bin/xjc

 java-plugin:/usr/lib/mozilla/plugins/libnpjp2.so:/usr/lib/jvm/openjdk17-bin/jre/lib/$_arch/libnpjp2.so
"

do_install() {
	vmkdir /usr/lib/jvm/openjdk17-bin
	cp -R ./* ${DESTDIR}/usr/lib/jvm/openjdk17-bin
}

# Template file for 'apitrace'
pkgname=apitrace
version=10.0
revision=1
build_style=cmake
configure_args="-DENABLE_GUI=1 -DENABLE_STATIC_SNAPPY=0"
hostmakedepends="python3 qt5-host-tools qt5-qmake"
makedepends="libX11-devel libdwarf-devel procps-ng-devel qt5-devel snappy-devel"
depends="python3"
checkdepends="gtest-devel"
short_desc="Tools for tracing graphics APIs"
maintainer="Hill Ma <maahiuzeon@gmail.com>"
license="MIT"
homepage="http://apitrace.github.io/"
distfiles="https://github.com/apitrace/apitrace/archive/refs/tags/${version}.tar.gz"
checksum=2e57d37af39369d7ce78666acb8afb1a49ec758f683a21077ec39eb0befae4ad

post_install() {
	vlicense LICENSE
}

apitrace-gui_package() {
	short_desc+=" - Qt GUI"
	depends="${sourcepkg}>=${version}_${revision}"
	pkg_install() {
		vmove usr/bin/qapitrace
	}
}
